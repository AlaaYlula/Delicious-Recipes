<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link th:href="@{/Style.css}" rel="stylesheet"/>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <style>
.w3-button {width:150px; }
</style>
</head>
<body>

<ul th:each="user: ${UserAccount}">
    <p th:text= "'************************* '+  ${user.username} + ' Account ***************************'">  </p>
    <div class="user">
        <li>
            <div >
                <label>First Name : </label><span th:text="${user.firstName}"></span></br>
                <label>Last Name : </label><span th:text="${user.lastName}"></span></br>
                <label>Date Of Birth :  </label><span th:text="${user.dateOfBirth}"></span></br>
                <label>Bio : </label><span th:text="${user.bio}"></span></br>

                <!-- Read https://www.baeldung.com/spring-thymeleaf-conditionals -->
                <div>
                    <td th:switch="${flag}">
                    <!-- Check if the user followed or not -->
                        <span th:case="'true'" >
                       <form  method="post" action="/users/follow">
                           <input type="hidden" th:value="${user.id}" name="user_id">
                           <button type="submit">Follow</button>
                       </form>
                       </span>
                        <span th:case="'false'">
                      <form  method="post" action="/users/unfollow">
                         <input type="hidden" th:value="${user.id}" name="user_id">
                          <button  type="submit">UnFollow</button>
                       </form>
                        </span>
                        <div th:case="*"></div>
                    </td>
                </div>

            </div>
        </li>
    </div>

    <!-- Following List -->

    </br></br>
    <p th:text = "'************************* '+  ${user.username} + ' Following ***************************'"></p>
    </br></br>

    <ul th:each="userFollowing: ${user.following}">
        <div class="user">
            <li>
                <div >
                    <label>First Name : </label> <span><a th:href = "'/user/account/' + ${userFollowing.id}" th:text="${userFollowing.firstName}"> </a></span></br>
                    <label>Last Name : </label><span th:text="${userFollowing.lastName}"></span></br>
                    <label>Date Of Birth :  </label><span th:text="${userFollowing.dateOfBirth}"></span></br>
                    <label>Bio : </label><span th:text="${userFollowing.bio}"></span></br>

                </div>
            </li>

        </div>

    </ul>

    <!-- Follower List -->

    </br></br>
    <p th:text = "'************************* '+  ${user.username} + ' Followers ***************************'"></p>
    </br></br>

    <ul th:each="userFollower: ${user.followers}">
        <div class="user" >
            <li>
                    <label>First Name : </label> <span><a th:href = "'/user/account/' + ${userFollower.id}" th:text="${userFollower.firstName}"> </a></span></br>
                    <label>Last Name : </label><span th:text="${userFollower.lastName}"></span></br>
                    <label>Date Of Birth :  </label><span th:text="${userFollower.dateOfBirth}"></span></br>
                    <label>Bio : </label><span th:text="${userFollower.bio}"></span></br>
            </li>
        </div>

    </ul>

    <!-- Check If Follow Or not To show the Recipe -->
    <div>
        <td th:switch="${flag}">
            <span th:case="'false'">
                   <!-- Recipes List -->
                    <h3>Recipes </h3>

    <ul th:each="recipe: ${recipesList}">
        <div class = "user">
            <li>
                <div >
                    <a th:href="@{/recipe/user(id=${recipe.recipe_id})}"><img   th:src="${recipe.thumbnail_url}"></a></br>
                    <label>Recipe Name: </label><span th:text="${recipe.name}"></span></br>
                    <label>Recipe Description: </label><span th:text="${recipe.description}"></span></br>
                </div>
                <h4>comments </h4>
                <ul th:each="comment: ${recipe.comments}">
                    <div >
                        <li>
                            <div >
                              <label>User  : </label><a th:href = "'/user/account/' + ${comment.userComments.id}" th:text="${comment.userComments.username}"> </a></br>
                              <label>comment </label><span th:text="${comment.text}"></span></br>
                            </div>

                        </li>
                        <form th:if="${comment.userComments.username == username }"  method="post" action="/comment/delete">
                            <input type="hidden" th:value="${comment.userComments.id}" name="comment_user_id">
                            <input type="hidden" th:value="${user.id}" name="user_id">
                            <input type="hidden" th:value="${comment.id}" name="id">
                            <button  type="submit">Delete comment</button>
                        </form>
                    </div>
                </ul>
                <form  method="post" action="/comment">
                    <label for="comment">comment</label>
                    <input type="text" id="comment" name="text">
                    <input type="hidden" th:value="${user.id}" name="user_id">
                    <input type="hidden" th:value="${recipe.recipe_id}" name="id">
                    <button  type="submit">Add comment</button>
                </form>


            </li>
        </div>
        <p>**********************************************************</p>

    </ul>
                        </span>
            <div th:case="*"></div>
        </td>
    </div>


</ul>


</body>
</html>